node {
	ws("${JENKINS_HOME}/jobs/${JOB_NAME}/builds/${BUILD_ID}") {
		withEnv(["GOPATH=${JENKINS_HOME}/jobs/${JOB_NAME}/builds/${BUILD_ID}"]) {
					env.PATH="${GOPATH}/bin:$PATH"
						stage('Checkout'){
						echo 'Checking out SCM'
						checkout scm
						}
					stage('Dependencies') {
                        sh('go get -u github.com/golang/protobuf/protoc-gen-go')
                        sh('go get github.com/micro/protoc-gen-micro')
					}
					stage('Build') {
						echo 'Building'
						dir('src/github.com/lukasjarosch/educonn-platform/') {
                            sh('./user/scripts/proto.sh')
                            sh('./user/scripts/build.sh')
						}
					}
					stage('Docker') {
					    echo 'Docker Image'
					}
		}
	}
}
