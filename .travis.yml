sudo: false

language: go

services:
  - docker

go:
  - "1.10"

# Skip install step, no deps via 'go get'. Dependencies must be vendored
install: true

      script:
        - bash bin/install-protobuf.sh
        - go get -u github.com/golang/dep/cmd/dep
        - go get -u github.com/golang/protobuf/protoc-gen-go
        - go get -u github.com/micro/protoc-gen-micro
        - export PATH=$PATH:$HOME/protobuf/bin
        - dep ensure -v
        - make proto
        - make all
        - echo "$DOCKER_PASSWORD" | docker login -u "$DOCKER_USERNAME"
        - make docker

